{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lexx\\\\Desktop\\\\food\\\\src\\\\components\\\\product_change_component\\\\product_edit_elem\\\\product_edit_elem.jsx\",\n  _s = $RefreshSig$();\nimport { useForm } from \"react-hook-form\";\nimport { TextInput } from \"../../../components/inputs_components/text-input/text-input\";\nimport ReactModal from \"react-modal\";\nimport { addedProducts, editProduct } from \"../../request/request-products\";\nimport React, { useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst customStyles = {\n  content: {\n    top: \"50%\",\n    left: \"50%\",\n    right: \"auto\",\n    bottom: \"auto\",\n    marginRight: \"-50%\",\n    transform: \"translate(-50%, -50%)\",\n    width: 400\n  }\n};\nexport const EditProduct = props => {\n  _s();\n  const {\n    isModalOpen,\n    onCloseModal,\n    setProducts,\n    id,\n    initialValues,\n    setIsEdit\n  } = props;\n  const [errorForm, setErrorForm] = useState(false);\n  const {\n    handleSubmit,\n    formState: {\n      errors\n    },\n    register\n  } = useForm({\n    defaultValues: initialValues\n  });\n  const onSubmit = data => {\n    editProduct({\n      ...data,\n      id\n    }).then(({\n      data\n    }) => {\n      setProducts(prevValue => [...prevValue.map(product => {\n        if (product.id === id) {\n          return {\n            ...data,\n            id\n          };\n        } else {\n          return product;\n        }\n      })]);\n      onCloseModal({\n        status: false,\n        id: null\n      });\n    }).catch(() => setErrorForm(true));\n  };\n  console.log(initialValues);\n  return /*#__PURE__*/_jsxDEV(ReactModal, {\n    isOpen: isModalOpen,\n    style: customStyles,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        flexDirection: \"column\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            onCloseModal({\n              status: false,\n              id: null\n            });\n            setErrorForm(false);\n          },\n          children: \"close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: errorForm ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"\\u041F\\u0440\\u043E\\u0438\\u0437\\u043E\\u0448\\u043B\\u0430 \\u043E\\u0449\\u0438\\u0431\\u043A\\u0430 \\u0438\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit(onSubmit),\n          children: [/*#__PURE__*/_jsxDEV(TextInput, {\n            register: register,\n            name: \"title\",\n            label: \"Наименование\",\n            validate: {\n              required: true\n            },\n            errors: errors\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n            register: register,\n            errors: errors,\n            name: \"price\",\n            label: \"Цена\",\n            validate: {\n              required: true\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n_s(EditProduct, \"8eJD2qu/Q8R5mPwxTKwuvUGnVYM=\", false, function () {\n  return [useForm];\n});\n_c = EditProduct;\nvar _c;\n$RefreshReg$(_c, \"EditProduct\");","map":{"version":3,"names":["useForm","TextInput","ReactModal","addedProducts","editProduct","React","useState","jsxDEV","_jsxDEV","customStyles","content","top","left","right","bottom","marginRight","transform","width","EditProduct","props","_s","isModalOpen","onCloseModal","setProducts","id","initialValues","setIsEdit","errorForm","setErrorForm","handleSubmit","formState","errors","register","defaultValues","onSubmit","data","then","prevValue","map","product","status","catch","console","log","isOpen","style","children","display","flexDirection","onClick","fileName","_jsxFileName","lineNumber","columnNumber","name","label","validate","required","_c","$RefreshReg$"],"sources":["C:/Users/Lexx/Desktop/food/src/components/product_change_component/product_edit_elem/product_edit_elem.jsx"],"sourcesContent":["import { useForm } from \"react-hook-form\";\r\nimport { TextInput } from \"../../../components/inputs_components/text-input/text-input\";\r\nimport ReactModal from \"react-modal\";\r\nimport { addedProducts, editProduct } from \"../../request/request-products\";\r\nimport React, { useState } from \"react\";\r\n\r\nconst customStyles = {\r\n  content: {\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    right: \"auto\",\r\n    bottom: \"auto\",\r\n    marginRight: \"-50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n    width: 400,\r\n  },\r\n};\r\n\r\nexport const EditProduct = (props) => {\r\n  const {\r\n    isModalOpen,\r\n    onCloseModal,\r\n    setProducts,\r\n    id,\r\n    initialValues,\r\n    setIsEdit,\r\n  } = props;\r\n  const [errorForm, setErrorForm] = useState(false);\r\n\r\n  const {\r\n    handleSubmit,\r\n    formState: { errors },\r\n    register,\r\n  } = useForm({\r\n    defaultValues: initialValues,\r\n  });\r\n\r\n  const onSubmit = (data) => {\r\n    editProduct({ ...data, id })\r\n      .then(({ data }) => {\r\n        setProducts((prevValue) => [\r\n          ...prevValue.map((product) => {\r\n            if (product.id === id) {\r\n              return { ...data, id };\r\n            } else {\r\n              return product;\r\n            }\r\n          }),\r\n        ]);\r\n        onCloseModal({ status: false, id: null });\r\n      })\r\n      .catch(() => setErrorForm(true));\r\n  };\r\n\r\n  console.log(initialValues);\r\n  return (\r\n    <ReactModal isOpen={isModalOpen} style={customStyles}>\r\n      <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n        <div>\r\n          <button\r\n            onClick={() => {\r\n              onCloseModal({ status: false, id: null });\r\n              setErrorForm(false);\r\n            }}\r\n          >\r\n            close\r\n          </button>\r\n        </div>\r\n        <div>\r\n          {errorForm ? (\r\n            <div>Произошла ощибка изменения</div>\r\n          ) : (\r\n            <form onSubmit={handleSubmit(onSubmit)}>\r\n              <TextInput\r\n                register={register}\r\n                name={\"title\"}\r\n                label={\"Наименование\"}\r\n                validate={{ required: true }}\r\n                errors={errors}\r\n              />\r\n              <TextInput\r\n                register={register}\r\n                errors={errors}\r\n                name={\"price\"}\r\n                label={\"Цена\"}\r\n                validate={{ required: true }}\r\n              />\r\n              <button>Изменить продукт</button>\r\n            </form>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </ReactModal>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}